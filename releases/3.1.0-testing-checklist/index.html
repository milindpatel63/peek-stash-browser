<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Modern web application for browsing and streaming Stash media content with real-time HLS transcoding"><meta name=author content=carrotwaxr><link href=https://carrotwaxr.github.io/peek-stash-browser/releases/3.1.0-testing-checklist/ rel=canonical><link rel=icon href=../../assets/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.7.1"><title>v3.1.0 Release Testing Checklist - Peek Stash Browser</title><link rel=stylesheet href=../../assets/stylesheets/main.484c7ddc.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.ab4e12ef.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../stylesheets/extra.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=deep-purple data-md-color-accent=pink> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#v310-release-testing-checklist class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="Peek Stash Browser" class="md-header__button md-logo" aria-label="Peek Stash Browser" data-md-component=logo> <img src=../../assets/peek-logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Peek Stash Browser </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> v3.1.0 Release Testing Checklist </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=deep-purple data-md-color-accent=pink aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=deep-purple data-md-color-accent=pink aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/carrotwaxr/peek-stash-browser title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> carrotwaxr/peek-stash-browser </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../getting-started/installation/ class=md-tabs__link> Getting Started </a> </li> <li class=md-tabs__item> <a href=../../user-guide/images/ class=md-tabs__link> User Guide </a> </li> <li class=md-tabs__item> <a href=../../development/technical-overview/ class=md-tabs__link> Development </a> </li> <li class=md-tabs__item> <a href=../../reference/troubleshooting/ class=md-tabs__link> Reference </a> </li> <li class=md-tabs__item> <a href=../v3.1.0/ class=md-tabs__link> Releases </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Peek Stash Browser" class="md-nav__button md-logo" aria-label="Peek Stash Browser" data-md-component=logo> <img src=../../assets/peek-logo.png alt=logo> </a> Peek Stash Browser </label> <div class=md-nav__source> <a href=https://github.com/carrotwaxr/peek-stash-browser title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> carrotwaxr/peek-stash-browser </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> Getting Started </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Getting Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../getting-started/installation/ class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class=md-nav__item> <a href=../../getting-started/configuration/ class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=../../getting-started/quick-start/ class=md-nav__link> <span class=md-ellipsis> Quick Start </span> </a> </li> <li class=md-nav__item> <a href=../../getting-started/upgrading/ class=md-nav__link> <span class=md-ellipsis> Upgrading </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> User Guide </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> User Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../user-guide/images/ class=md-nav__link> <span class=md-ellipsis> Images </span> </a> </li> <li class=md-nav__item> <a href=../../user-guide/recommendations/ class=md-nav__link> <span class=md-ellipsis> Recommendations </span> </a> </li> <li class=md-nav__item> <a href=../../user-guide/custom-carousels/ class=md-nav__link> <span class=md-ellipsis> Custom Carousels </span> </a> </li> <li class=md-nav__item> <a href=../../user-guide/watch-history/ class=md-nav__link> <span class=md-ellipsis> Watch History </span> </a> </li> <li class=md-nav__item> <a href=../../user-guide/keyboard-navigation/ class=md-nav__link> <span class=md-ellipsis> Keyboard Navigation </span> </a> </li> <li class=md-nav__item> <a href=../../user-guide/playlists/ class=md-nav__link> <span class=md-ellipsis> Playlists </span> </a> </li> <li class=md-nav__item> <a href=../../user-guide/hidden-items/ class=md-nav__link> <span class=md-ellipsis> Hidden Items </span> </a> </li> <li class=md-nav__item> <a href=../../user-guide/external-player/ class=md-nav__link> <span class=md-ellipsis> External Player </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> Development </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Development </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../development/technical-overview/ class=md-nav__link> <span class=md-ellipsis> Technical Overview </span> </a> </li> <li class=md-nav__item> <a href=../../development/sync-architecture/ class=md-nav__link> <span class=md-ellipsis> Sync Architecture </span> </a> </li> <li class=md-nav__item> <a href=../../development/api-reference/ class=md-nav__link> <span class=md-ellipsis> API Reference </span> </a> </li> <li class=md-nav__item> <a href=../../development/regression-testing/ class=md-nav__link> <span class=md-ellipsis> Regression Testing Guide </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> Reference </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../reference/troubleshooting/ class=md-nav__link> <span class=md-ellipsis> Troubleshooting </span> </a> </li> <li class=md-nav__item> <a href=../../reference/faq/ class=md-nav__link> <span class=md-ellipsis> FAQ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex=0> <span class=md-ellipsis> Releases </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Releases </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../v3.1.0/ class=md-nav__link> <span class=md-ellipsis> v3.1.0 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#pre-testing-setup class=md-nav__link> <span class=md-ellipsis> Pre-Testing Setup </span> </a> </li> <li class=md-nav__item> <a href=#critical-security-must-pass-before-release class=md-nav__link> <span class=md-ellipsis> üîí Critical Security (Must Pass Before Release) </span> </a> <nav class=md-nav aria-label="üîí Critical Security (Must Pass Before Release)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#password-reset-protection class=md-nav__link> <span class=md-ellipsis> Password Reset Protection </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#major-features class=md-nav__link> <span class=md-ellipsis> üöÄ Major Features </span> </a> <nav class=md-nav aria-label="üöÄ Major Features"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#images-page-gallery-image-browsing-new class=md-nav__link> <span class=md-ellipsis> Images Page &amp; Gallery Image Browsing (NEW) </span> </a> </li> <li class=md-nav__item> <a href=#gallery-image-lightbox class=md-nav__link> <span class=md-ellipsis> Gallery Image Lightbox </span> </a> </li> <li class=md-nav__item> <a href=#scene-urls-display-195 class=md-nav__link> <span class=md-ellipsis> Scene URLs Display (#195) </span> </a> </li> <li class=md-nav__item> <a href=#carousel-see-more-links-192 class=md-nav__link> <span class=md-ellipsis> Carousel "See More" Links (#192) </span> </a> </li> <li class=md-nav__item> <a href=#proxy-authentication-224 class=md-nav__link> <span class=md-ellipsis> Proxy Authentication (#224) </span> </a> </li> <li class=md-nav__item> <a href=#soft-delete-entities-232 class=md-nav__link> <span class=md-ellipsis> Soft-Delete Entities (#232) </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#performance-scalability class=md-nav__link> <span class=md-ellipsis> üîß Performance &amp; Scalability </span> </a> <nav class=md-nav aria-label="üîß Performance & Scalability"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#pre-computed-exclusions-system-228 class=md-nav__link> <span class=md-ellipsis> Pre-Computed Exclusions System (#228) </span> </a> </li> <li class=md-nav__item> <a href=#sync-timestamp-handling-200-202-208-214 class=md-nav__link> <span class=md-ellipsis> Sync Timestamp Handling (#200, #202-#208, #214) </span> </a> </li> <li class=md-nav__item> <a href=#scene-tag-inheritance-227 class=md-nav__link> <span class=md-ellipsis> Scene Tag Inheritance (#227) </span> </a> </li> <li class=md-nav__item> <a href=#imagequerybuilder-231 class=md-nav__link> <span class=md-ellipsis> ImageQueryBuilder (#231) </span> </a> </li> <li class=md-nav__item> <a href=#image-gallery-inheritance-226 class=md-nav__link> <span class=md-ellipsis> Image Gallery Inheritance (#226) </span> </a> </li> <li class=md-nav__item> <a href=#sync-scalability-220 class=md-nav__link> <span class=md-ellipsis> Sync Scalability (#220) </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#bug-fix-verification class=md-nav__link> <span class=md-ellipsis> üêõ Bug Fix Verification </span> </a> <nav class=md-nav aria-label="üêõ Bug Fix Verification"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#random-sort-distribution-203 class=md-nav__link> <span class=md-ellipsis> Random Sort Distribution (#203) </span> </a> </li> <li class=md-nav__item> <a href=#large-exclusion-sets-204 class=md-nav__link> <span class=md-ellipsis> Large Exclusion Sets (#204) </span> </a> </li> <li class=md-nav__item> <a href=#gallery-detail-parity-215 class=md-nav__link> <span class=md-ellipsis> Gallery Detail Parity (#215) </span> </a> </li> <li class=md-nav__item> <a href=#playlist-user-data-217 class=md-nav__link> <span class=md-ellipsis> Playlist User Data (#217) </span> </a> </li> <li class=md-nav__item> <a href=#chunked-image-queries-222 class=md-nav__link> <span class=md-ellipsis> Chunked Image Queries (#222) </span> </a> </li> <li class=md-nav__item> <a href=#request-cancellation-213 class=md-nav__link> <span class=md-ellipsis> Request Cancellation (#213) </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#ui-improvements class=md-nav__link> <span class=md-ellipsis> üé® UI Improvements </span> </a> <nav class=md-nav aria-label="üé® UI Improvements"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#detail-page-image-tabs-216 class=md-nav__link> <span class=md-ellipsis> Detail Page Image Tabs (#216) </span> </a> </li> <li class=md-nav__item> <a href=#playlistwatch-history-previews-219 class=md-nav__link> <span class=md-ellipsis> Playlist/Watch History Previews (#219) </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#documentation-developer-experience class=md-nav__link> <span class=md-ellipsis> üìù Documentation &amp; Developer Experience </span> </a> <nav class=md-nav aria-label="üìù Documentation & Developer Experience"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#api-documentation-generator-237 class=md-nav__link> <span class=md-ellipsis> API Documentation Generator (#237) </span> </a> </li> <li class=md-nav__item> <a href=#api-types-234-236 class=md-nav__link> <span class=md-ellipsis> API Types (#234-236) </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#database-migration class=md-nav__link> <span class=md-ellipsis> üîÑ Database Migration </span> </a> <nav class=md-nav aria-label="üîÑ Database Migration"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#auto-sync-after-migration-233 class=md-nav__link> <span class=md-ellipsis> Auto-Sync After Migration (#233) </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#regression-tests class=md-nav__link> <span class=md-ellipsis> üìã Regression Tests </span> </a> <nav class=md-nav aria-label="üìã Regression Tests"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#core-functionality class=md-nav__link> <span class=md-ellipsis> Core Functionality </span> </a> </li> <li class=md-nav__item> <a href=#search-filters class=md-nav__link> <span class=md-ellipsis> Search &amp; Filters </span> </a> </li> <li class=md-nav__item> <a href=#settings class=md-nav__link> <span class=md-ellipsis> Settings </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#automated-test-verification class=md-nav__link> <span class=md-ellipsis> üß™ Automated Test Verification </span> </a> <nav class=md-nav aria-label="üß™ Automated Test Verification"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#unit-tests class=md-nav__link> <span class=md-ellipsis> Unit Tests </span> </a> </li> <li class=md-nav__item> <a href=#integration-tests-optional-requires-server class=md-nav__link> <span class=md-ellipsis> Integration Tests (Optional - requires server) </span> </a> </li> <li class=md-nav__item> <a href=#linting class=md-nav__link> <span class=md-ellipsis> Linting </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#code-review-findings-summary class=md-nav__link> <span class=md-ellipsis> üîç Code Review Findings Summary </span> </a> <nav class=md-nav aria-label="üîç Code Review Findings Summary"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#critical-issues-none class=md-nav__link> <span class=md-ellipsis> Critical Issues: None </span> </a> </li> <li class=md-nav__item> <a href=#important-issues-should-address-in-31x-patch class=md-nav__link> <span class=md-ellipsis> Important Issues (Should address in 3.1.x patch) </span> </a> </li> <li class=md-nav__item> <a href=#suggestions-address-in-320 class=md-nav__link> <span class=md-ellipsis> Suggestions (Address in 3.2.0) </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#documentation-gaps class=md-nav__link> <span class=md-ellipsis> üìö Documentation Gaps </span> </a> </li> <li class=md-nav__item> <a href=#test-infrastructure-issue class=md-nav__link> <span class=md-ellipsis> üîß Test Infrastructure Issue </span> </a> </li> <li class=md-nav__item> <a href=#ui-testing-puppeteerplaywright-assessment class=md-nav__link> <span class=md-ellipsis> üéØ UI Testing (Puppeteer/Playwright) Assessment </span> </a> </li> <li class=md-nav__item> <a href=#environment-notes class=md-nav__link> <span class=md-ellipsis> Environment Notes </span> </a> </li> <li class=md-nav__item> <a href=#sign-off class=md-nav__link> <span class=md-ellipsis> Sign-Off </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=v310-release-testing-checklist>v3.1.0 Release Testing Checklist<a class=headerlink href=#v310-release-testing-checklist title="Permanent link">&para;</a></h1> <p><strong>Testing Version:</strong> v3.1.0-beta.10 <strong>Previous Stable:</strong> v3.0.0 <strong>Code Review Date:</strong> 2026-01-04</p> <p>This checklist covers all changes from v3.0.x through v3.1.0 with detailed testing procedures based on comprehensive code review.</p> <hr> <h2 id=pre-testing-setup>Pre-Testing Setup<a class=headerlink href=#pre-testing-setup title="Permanent link">&para;</a></h2> <p>Before testing, ensure: 1. Fresh database OR upgrade from v3.0.x 2. Stash instance with representative data (mix of scenes, performers, galleries, images) 3. At least one user with admin role 4. Browser dev tools open to monitor network requests</p> <hr> <h2 id=critical-security-must-pass-before-release>üîí Critical Security (Must Pass Before Release)<a class=headerlink href=#critical-security-must-pass-before-release title="Permanent link">&para;</a></h2> <h3 id=password-reset-protection>Password Reset Protection<a class=headerlink href=#password-reset-protection title="Permanent link">&para;</a></h3> <p><strong>Issue:</strong> After initial setup completes, the first-time password endpoint must be blocked.</p> <p><strong>Test Procedure:</strong> 1. Complete initial setup (create admin user, connect to Stash) 2. Open browser dev tools (Network tab) 3. Send POST request to <code>/api/auth/first-time-password</code>: <div class="language-bash highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>curl<span class=w> </span>-X<span class=w> </span>POST<span class=w> </span>http://localhost:9999/api/auth/first-time-password<span class=w> </span><span class=se>\</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a><span class=w>  </span>-H<span class=w> </span><span class=s2>&quot;Content-Type: application/json&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=w>  </span>-d<span class=w> </span><span class=s1>&#39;{&quot;username&quot;:&quot;admin&quot;,&quot;newPassword&quot;:&quot;hacked123&quot;}&#39;</span>
</span></code></pre></div> 4. <strong>Expected:</strong> 403 Forbidden with message "Setup is complete..." 5. Verify you can still log in with original password</p> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Password reset blocked after setup complete (403 response)</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Original password still works after failed reset attempt</li> </ul> <p><strong>Code Review Note:</strong> Race condition exists between setup check and password update. Low risk in practice but noted for future hardening.</p> <hr> <h2 id=major-features>üöÄ Major Features<a class=headerlink href=#major-features title="Permanent link">&para;</a></h2> <h3 id=images-page-gallery-image-browsing-new>Images Page &amp; Gallery Image Browsing (NEW)<a class=headerlink href=#images-page-gallery-image-browsing-new title="Permanent link">&para;</a></h3> <p><strong>New Feature:</strong> Dedicated Images browsing page with full filtering capability.</p> <p><strong>Test Procedure:</strong> 1. Navigate to Images page from main navigation 2. Verify images load with pagination controls 3. Apply filters: by performer, tag, studio, gallery 4. Test sort options including Random 5. Open an image in lightbox 6. Navigate with arrow keys and verify smooth transitions 7. Wait 3+ seconds on an image, then check Network tab for <code>recordView</code> API call</p> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Images page loads and displays images correctly</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Pagination works (change page, change per-page count)</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Filters apply correctly (performer, tag, studio, gallery)</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Random sort is deterministic within same session</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Lightbox opens with keyboard navigation (arrow keys, Escape)</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> View tracking fires after 3 seconds (check Network tab)</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Swipe gestures work on touch devices</li> </ul> <p><strong>Known Limitation (from code review):</strong> Cross-page lightbox navigation not yet on standalone Images page (works on GalleryDetail).</p> <h3 id=gallery-image-lightbox>Gallery Image Lightbox<a class=headerlink href=#gallery-image-lightbox title="Permanent link">&para;</a></h3> <p><strong>Test Procedure:</strong> 1. Open a gallery with 50+ images 2. Navigate to last image on current page 3. Press right arrow - should load next page and continue 4. Open metadata drawer (info button or 'i' key) 5. Verify inherited metadata from gallery (studio, photographer, performers, tags)</p> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Cross-page navigation works in lightbox</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Metadata drawer shows inherited fields</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Fullscreen works (F key or button)</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Slideshow auto-advances</li> </ul> <h3 id=scene-urls-display-195>Scene URLs Display (#195)<a class=headerlink href=#scene-urls-display-195 title="Permanent link">&para;</a></h3> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Scene detail panel shows URLs field (if present in Stash)</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Director field displays if present</li> </ul> <h3 id=carousel-see-more-links-192>Carousel "See More" Links (#192)<a class=headerlink href=#carousel-see-more-links-192 title="Permanent link">&para;</a></h3> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Home carousels have "See More" button</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Custom carousels include "See More"</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> See More navigates to correctly filtered scene list</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Continue Watching carousel has "See More" link</li> </ul> <h3 id=proxy-authentication-224>Proxy Authentication (#224)<a class=headerlink href=#proxy-authentication-224 title="Permanent link">&para;</a></h3> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> <code>PROXY_AUTH_HEADER</code> environment variable works for reverse proxy auth</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Normal authentication still functions when not using proxy auth</li> </ul> <h3 id=soft-delete-entities-232>Soft-Delete Entities (#232)<a class=headerlink href=#soft-delete-entities-232 title="Permanent link">&para;</a></h3> <p><strong>Test Procedure:</strong> 1. Delete a scene in Stash 2. Trigger sync in Peek 3. Check database: scene should have <code>deletedAt</code> timestamp set (not removed from DB) 4. Verify scene doesn't appear in browse 5. Re-add same scene in Stash 6. Trigger sync 7. Verify scene reappears in Peek</p> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Removed entities are soft-deleted (check DB: deletedAt is set)</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Soft-deleted items don't appear in browse</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Re-adding entity in Stash restores it in Peek</li> </ul> <hr> <h2 id=performance-scalability>üîß Performance &amp; Scalability<a class=headerlink href=#performance-scalability title="Permanent link">&para;</a></h2> <h3 id=pre-computed-exclusions-system-228>Pre-Computed Exclusions System (#228)<a class=headerlink href=#pre-computed-exclusions-system-228 title="Permanent link">&para;</a></h3> <p><strong>New Architecture:</strong> Exclusions pre-computed and stored in UserExcludedEntity table.</p> <p><strong>Test Procedure:</strong> 1. Hide a performer with many scenes (50+) 2. Navigate to Scenes - verify hidden performer's scenes don't appear 3. Check scene count decreased appropriately 4. Go to admin Server Settings &gt; find exclusion recompute option 5. Trigger recompute 6. Verify scenes still excluded after recompute 7. Unhide the performer 8. Verify scenes reappear immediately (no page refresh needed)</p> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Hidden items excluded from all entity lists</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Cascade exclusions work (hiding studio hides its scenes)</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Empty entity exclusion works (tags with 0 scenes can be hidden)</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Exclusion recompute endpoint works</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Unhiding updates immediately</li> </ul> <h3 id=sync-timestamp-handling-200-202-208-214>Sync Timestamp Handling (#200, #202-#208, #214)<a class=headerlink href=#sync-timestamp-handling-200-202-208-214 title="Permanent link">&para;</a></h3> <p><strong>Bug Fixed:</strong> Infinite re-sync caused by sub-second timestamp precision mismatch with Stash.</p> <p><strong>Test Procedure:</strong> 1. Trigger full sync and wait for completion 2. Trigger incremental sync immediately after 3. Check server logs - should show "0 changed" or minimal changes (not re-syncing everything) 4. Edit a scene in Stash (change title) 5. Trigger incremental sync 6. Verify only the changed scene is synced</p> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Incremental sync only fetches changed entities</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> No infinite re-sync loops</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Sync works across timezone differences with Stash</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Edited entities are picked up by incremental sync</li> </ul> <h3 id=scene-tag-inheritance-227>Scene Tag Inheritance (#227)<a class=headerlink href=#scene-tag-inheritance-227 title="Permanent link">&para;</a></h3> <p><strong>Test Procedure:</strong> 1. Find a performer with tags in Stash (e.g., performer has "Brunette" tag) 2. Find a scene with that performer 3. In Peek, filter scenes by one of the performer's tags ("Brunette") 4. Verify the scene appears in results (inherited tag filtering)</p> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Scenes inherit tags from performers/studios/groups</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Filtering by inherited tags works</li> </ul> <h3 id=imagequerybuilder-231>ImageQueryBuilder (#231)<a class=headerlink href=#imagequerybuilder-231 title="Permanent link">&para;</a></h3> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Images page loads and filters correctly</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Gallery images paginate properly</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Random sort works on images</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Image exclusions (hidden galleries) work</li> </ul> <h3 id=image-gallery-inheritance-226>Image Gallery Inheritance (#226)<a class=headerlink href=#image-gallery-inheritance-226 title="Permanent link">&para;</a></h3> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Images inherit metadata from parent gallery</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Gallery performer/tag info shows on images</li> </ul> <h3 id=sync-scalability-220>Sync Scalability (#220)<a class=headerlink href=#sync-scalability-220 title="Permanent link">&para;</a></h3> <p><strong>For large libraries (50k+ scenes):</strong> - [ ] Large libraries sync without timeout - [ ] Browsing remains responsive after sync</p> <hr> <h2 id=bug-fix-verification>üêõ Bug Fix Verification<a class=headerlink href=#bug-fix-verification title="Permanent link">&para;</a></h2> <h3 id=random-sort-distribution-203>Random Sort Distribution (#203)<a class=headerlink href=#random-sort-distribution-203 title="Permanent link">&para;</a></h3> <p><strong>Test Procedure:</strong> 1. Go to Scenes, select Random sort 2. Note the first 5 scene titles 3. Navigate to page 2, then return to page 1 4. Verify same 5 scenes in same order (pagination stable) 5. Refresh the page entirely 6. Verify new random order (different seed on refresh)</p> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Random sort is consistent within session</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Pagination maintains order with same seed</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Page refresh gives new random order</li> </ul> <h3 id=large-exclusion-sets-204>Large Exclusion Sets (#204)<a class=headerlink href=#large-exclusion-sets-204 title="Permanent link">&para;</a></h3> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Works with 10k+ hidden items without SQL error</li> </ul> <h3 id=gallery-detail-parity-215>Gallery Detail Parity (#215)<a class=headerlink href=#gallery-detail-parity-215 title="Permanent link">&para;</a></h3> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Gallery lightbox shows performer/tag info</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Image metadata matches gallery view</li> </ul> <h3 id=playlist-user-data-217>Playlist User Data (#217)<a class=headerlink href=#playlist-user-data-217 title="Permanent link">&para;</a></h3> <p><strong>Bug Fixed:</strong> Playlist was showing Stash ratings instead of Peek ratings.</p> <p><strong>Test Procedure:</strong> 1. Rate a scene 5 stars in Peek 2. Ensure same scene has different (or no) rating in Stash 3. Add scene to a playlist in Peek 4. View playlist - verify Peek's 5-star rating shows</p> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Playlist shows Peek ratings, not Stash ratings</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Playlist shows Peek favorite status, not Stash</li> </ul> <h3 id=chunked-image-queries-222>Chunked Image Queries (#222)<a class=headerlink href=#chunked-image-queries-222 title="Permanent link">&para;</a></h3> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Large galleries (1000+ images) load correctly</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Cross-page lightbox navigation works</li> </ul> <h3 id=request-cancellation-213>Request Cancellation (#213)<a class=headerlink href=#request-cancellation-213 title="Permanent link">&para;</a></h3> <p><strong>Test Procedure:</strong> 1. Open Scenes page 2. Type in search box rapidly (a, ab, abc, abcd) 3. Watch Network tab - previous requests should be cancelled (red in dev tools) 4. Only final search result should populate</p> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Previous requests cancelled when new search starts</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> No stale data from cancelled requests</li> </ul> <hr> <h2 id=ui-improvements>üé® UI Improvements<a class=headerlink href=#ui-improvements title="Permanent link">&para;</a></h2> <h3 id=detail-page-image-tabs-216>Detail Page Image Tabs (#216)<a class=headerlink href=#detail-page-image-tabs-216 title="Permanent link">&para;</a></h3> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Performer/Studio/Tag detail pages show image counts</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Image counts include inherited images</li> </ul> <h3 id=playlistwatch-history-previews-219>Playlist/Watch History Previews (#219)<a class=headerlink href=#playlistwatch-history-previews-219 title="Permanent link">&para;</a></h3> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Playlist items show animated preview on hover</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Watch history items show animated preview on hover</li> </ul> <hr> <h2 id=documentation-developer-experience>üìù Documentation &amp; Developer Experience<a class=headerlink href=#documentation-developer-experience title="Permanent link">&para;</a></h2> <h3 id=api-documentation-generator-237>API Documentation Generator (#237)<a class=headerlink href=#api-documentation-generator-237 title="Permanent link">&para;</a></h3> <p><div class="language-bash highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=nb>cd</span><span class=w> </span>server<span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span>npm<span class=w> </span>run<span class=w> </span>generate-api-docs
</span></code></pre></div> - [ ] Command runs without error - [ ] Generated docs appear in docs/development/api-reference/</p> <h3 id=api-types-234-236>API Types (#234-236)<a class=headerlink href=#api-types-234-236 title="Permanent link">&para;</a></h3> <p><div class="language-bash highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=nb>cd</span><span class=w> </span>server<span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span>npm<span class=w> </span>run<span class=w> </span>build
</span></code></pre></div> - [ ] TypeScript build succeeds with no type errors</p> <hr> <h2 id=database-migration>üîÑ Database Migration<a class=headerlink href=#database-migration title="Permanent link">&para;</a></h2> <h3 id=auto-sync-after-migration-233>Auto-Sync After Migration (#233)<a class=headerlink href=#auto-sync-after-migration-233 title="Permanent link">&para;</a></h3> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Fresh install triggers full sync automatically</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Upgrading from 3.0.x triggers sync for new fields</li> </ul> <hr> <h2 id=regression-tests>üìã Regression Tests<a class=headerlink href=#regression-tests title="Permanent link">&para;</a></h2> <h3 id=core-functionality>Core Functionality<a class=headerlink href=#core-functionality title="Permanent link">&para;</a></h3> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Login/logout works</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Scene browsing and filtering</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Performer/Studio/Tag/Group/Gallery browsing</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Scene playback (direct and transcoded)</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Playlists CRUD</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Custom carousels CRUD</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Rating and favoriting entities</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Watch history tracking</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Image viewing and O-counter</li> </ul> <h3 id=search-filters>Search &amp; Filters<a class=headerlink href=#search-filters title="Permanent link">&para;</a></h3> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Text search</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Performer filter</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Studio filter</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Tag filter (including inherited)</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Date filters</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Duration filters</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Resolution filters</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Sort options (including random)</li> </ul> <h3 id=settings>Settings<a class=headerlink href=#settings title="Permanent link">&para;</a></h3> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> User settings save/load</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Server settings (admin only)</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Custom themes</li> </ul> <hr> <h2 id=automated-test-verification>üß™ Automated Test Verification<a class=headerlink href=#automated-test-verification title="Permanent link">&para;</a></h2> <h3 id=unit-tests>Unit Tests<a class=headerlink href=#unit-tests title="Permanent link">&para;</a></h3> <p><div class="language-bash highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=nb>cd</span><span class=w> </span>server<span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span>npm<span class=w> </span>run<span class=w> </span>test:run
</span></code></pre></div> - [ ] All unit tests pass (500+ tests) - [ ] Integration tests may skip (expected - need running server)</p> <h3 id=integration-tests-optional-requires-server>Integration Tests (Optional - requires server)<a class=headerlink href=#integration-tests-optional-requires-server title="Permanent link">&para;</a></h3> <p><div class="language-bash highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=nb>cd</span><span class=w> </span>server<span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span>npm<span class=w> </span>run<span class=w> </span>test:integration
</span></code></pre></div> <strong>Requires:</strong> Running Peek server at localhost:9999 with test data - [ ] API integration tests pass - [ ] Filter integration tests pass</p> <h3 id=linting>Linting<a class=headerlink href=#linting title="Permanent link">&para;</a></h3> <p><div class="language-bash highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=nb>cd</span><span class=w> </span>server<span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span>npm<span class=w> </span>run<span class=w> </span>lint
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=nb>cd</span><span class=w> </span>client<span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span>npm<span class=w> </span>run<span class=w> </span>lint
</span></code></pre></div> - [ ] Server lint passes (warnings OK for any types) - [ ] Client lint passes (warnings OK for exhaustive-deps)</p> <hr> <h2 id=code-review-findings-summary>üîç Code Review Findings Summary<a class=headerlink href=#code-review-findings-summary title="Permanent link">&para;</a></h2> <h3 id=critical-issues-none>Critical Issues: None<a class=headerlink href=#critical-issues-none title="Permanent link">&para;</a></h3> <h3 id=important-issues-should-address-in-31x-patch>Important Issues (Should address in 3.1.x patch)<a class=headerlink href=#important-issues-should-address-in-31x-patch title="Permanent link">&para;</a></h3> <ol> <li><strong>SQL Injection Risk in ExclusionComputationService</strong> - <code>Prisma.raw()</code> with tag IDs (low risk, IDs from DB not user input)</li> <li><strong>SceneTagInheritanceService uses $executeRawUnsafe</strong> - Scene IDs interpolated, recommend parameterized queries</li> <li><strong>Missing indexes</strong> - ImagePerformer.imageId and ImageTag.imageId lack indexes for hydration queries</li> <li><strong>Setup reset endpoint</strong> - <code>/api/setup/reset</code> is public and could be exploited on single-user systems</li> </ol> <h3 id=suggestions-address-in-320>Suggestions (Address in 3.2.0)<a class=headerlink href=#suggestions-address-in-320 title="Permanent link">&para;</a></h3> <ol> <li>Save intermediate sync progress for crash recovery</li> <li>Add rate limiting to security-sensitive endpoints</li> <li>Implement cross-page lightbox on Images page</li> <li>Add audit logging for password changes</li> <li>Increase bcrypt cost factor from 10 to 12</li> </ol> <hr> <h2 id=documentation-gaps>üìö Documentation Gaps<a class=headerlink href=#documentation-gaps title="Permanent link">&para;</a></h2> <p><del>These need to be created/updated before stable release:</del></p> <p>All documentation gaps have been addressed in PR #240:</p> <ol> <li>‚úÖ <strong>Images Page User Guide</strong> - Created <code>docs/user-guide/images.md</code></li> <li>‚úÖ <strong>Recommendations Feature</strong> - Created <code>docs/user-guide/recommendations.md</code></li> <li>‚úÖ <strong>Scene URLs Feature</strong> - Documented in release notes</li> <li>‚úÖ <strong>CHANGELOG/Release Notes</strong> - Created <code>docs/releases/v3.1.0.md</code></li> </ol> <hr> <h2 id=test-infrastructure-issue>üîß Test Infrastructure Issue<a class=headerlink href=#test-infrastructure-issue title="Permanent link">&para;</a></h2> <p><del><strong>Issue Identified:</strong> Default <code>npm test</code> picks up integration tests that fail without running server.</del></p> <p>‚úÖ <strong>Fixed in PR #248</strong> - All test infrastructure issues resolved:</p> <ul> <li>‚úÖ <code>vitest.config.ts</code> updated to exclude integration tests from default run</li> <li>‚úÖ <code>StashSyncService.integration.test.ts</code> renamed to <code>.stash.test.ts</code></li> <li>‚úÖ <code>SceneQueryBuilder.integration.test.ts</code> moved to <code>integration/</code> folder</li> </ul> <hr> <h2 id=ui-testing-puppeteerplaywright-assessment>üéØ UI Testing (Puppeteer/Playwright) Assessment<a class=headerlink href=#ui-testing-puppeteerplaywright-assessment title="Permanent link">&para;</a></h2> <p><strong>Would E2E tests be beneficial?</strong> Yes, but significant initial lift.</p> <p><strong>Priority features for E2E testing:</strong> 1. Video playback flow (start, pause, resume, quality switch) 2. Lightbox navigation (keyboard, touch, cross-page) 3. Filter application and results verification 4. Login/logout authentication flow</p> <p><strong>Estimated effort:</strong> 2-3 dedicated sessions to set up infrastructure, then incremental test additions.</p> <hr> <h2 id=environment-notes>Environment Notes<a class=headerlink href=#environment-notes title="Permanent link">&para;</a></h2> <p><strong>Test Environment:</strong> - Platform: ___ - Stash Version: ___ - Library Size: ___ scenes, ___ images, ___ performers - Browser: ___</p> <p><strong>Issues Found During Testing:</strong></p> <hr> <h2 id=sign-off>Sign-Off<a class=headerlink href=#sign-off title="Permanent link">&para;</a></h2> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> All Critical Security items pass</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> All Major Feature items pass</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> No regression in core functionality</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Documentation gaps addressed</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Ready for stable v3.1.0 release</li> </ul> <p><strong>Tested by:</strong> ___ <strong>Date:</strong> ___</p> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2025 carrotwaxr </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/carrotwaxr/peek-stash-browser target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://hub.docker.com/r/carrotwaxr/peek-stash-browser target=_blank rel=noopener title=hub.docker.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M349.9 236.3h-66.1v-59.4h66.1zm0-204.3h-66.1v60.7h66.1zm78.2 144.8H362v59.4h66.1zm-156.3-72.1h-66.1v60.1h66.1zm78.1 0h-66.1v60.1h66.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1zm78.1 0h-66.1v59.4h66.1zm-78.1-72.1h-66.1v60.1h66.1z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"annotate": null, "base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.sections", "navigation.expand", "navigation.top", "navigation.footer", "search.suggest", "search.highlight", "search.share", "content.code.copy", "content.code.annotate", "content.tabs.link"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../../assets/javascripts/bundle.79ae519e.min.js></script> <script src=../../javascripts/extra.js></script> </body> </html>