# Peek v3.0.0 Release Announcement

**Copy/paste-ready for Discord and Discourse**

---

## Discord Announcement (short)

```
**Peek v3.0.0 Released!**

Major update with SQLite-based entity storage for massive scalability improvements:

- **100k+ scene support** - No more memory limits
- **3-minute sync** for 22k scenes (was 3.6 hours)
- **Persistent library** - Data survives restarts
- **Comprehensive filtering** - All performer/scene filters now work correctly

**Upgrading:**
1. Back up your database
2. `docker pull carrotwaxr/peek-stash-browser:latest`
3. Restart container
4. Wait for automatic sync

All user data (watch history, playlists, ratings) is preserved.

**Beta users:** Run a full sync after upgrading to populate new fields.

Docs: https://carrotwaxr.github.io/peek-stash-browser/getting-started/upgrading/
Issues: https://github.com/carrotwaxr/peek-stash-browser/issues
```

---

## Discourse Announcement (detailed)

```markdown
# Peek v3.0.0 Released - SQLite Entity Cache

After 13 beta versions, Peek 3.0.0 is now stable!

## What's New

Version 3.0.0 is a major architectural change: your Stash library data is now stored in SQLite tables instead of in-memory. This provides:

| Improvement | Before | After |
|-------------|--------|-------|
| Library size limit | ~50k scenes (memory) | 100k+ scenes (disk) |
| Sync time (22k scenes) | ~3.6 hours | ~3 minutes |
| Data persistence | Lost on restart | Survives restarts |
| Query speed | Slow on large libs | Sub-100ms |

## New Features in 3.0

- **Unit Preference** - Choose metric or imperial for performer measurements
- **Comprehensive Filters** - All performer attributes now filterable (career length, ethnicity, eye color, etc.)
- **Filter Chip Interactions** - Click filter chips to highlight the corresponding control
- **Improved Gallery Display** - Better fallback titles for unnamed galleries
- **Filename Search** - Scene search now includes filepath/filename
- **Tag Alias Search** - Tag search now includes aliases

## Upgrading

**From any previous version:**

1. Back up your database (copy `peek.db` from your data volume)
2. Pull the new image: `docker pull carrotwaxr/peek-stash-browser:latest`
3. Restart your container
4. Wait for the automatic sync to complete

Your user data is fully preserved:
- User accounts
- Watch history & resume positions
- Playlists
- All ratings and favorites
- Filter presets
- Hidden entities

**From 3.0.0 beta versions:**

We recommend running a **full sync** after upgrading to ensure new fields are populated:
1. Settings > Server Settings
2. Click "Sync from Stash"
3. Select "Full Sync"

This populates `fileBasename` (gallery display) and `fakeTits` (performer filtering) for existing data.

## Breaking Changes from 2.x

- Initial sync is required after upgrade (automatic)
- Sync time depends on library size (see table in upgrade guide)

## Documentation

- [Upgrade Guide](https://carrotwaxr.github.io/peek-stash-browser/getting-started/upgrading/)
- [Full Documentation](https://carrotwaxr.github.io/peek-stash-browser/)

## Issues

Please report bugs on [GitHub Issues](https://github.com/carrotwaxr/peek-stash-browser/issues) with:
- Your Peek version
- Your Stash version
- Library size
- Steps to reproduce

Thanks to everyone who tested the beta versions!
```

---

## GitHub Release Notes

```markdown
## What's Changed

### Major Changes
- **SQLite Entity Cache** - Library data now stored in SQLite for 100k+ scene support
- **Persistent Storage** - Library data survives container restarts
- **3x faster sync** - Initial sync is ~3 minutes for 22k scenes

### New Features
- Unit preference setting (metric/imperial) for performer measurements
- Filter chip click-to-highlight interaction
- Comprehensive performer filtering (career length, ethnicity, eye color, breast type)
- Improved gallery title fallback display
- Scene search now includes filepath/filename
- Tag search now includes aliases

### Bug Fixes (across beta cycle)
- Fixed performer filter case sensitivity
- Fixed sorting by path, last_o_at, performer_count
- Fixed O counter aggregation for performers/studios/tags
- Fixed watch history tracking event timing
- Fixed gallery cards showing "Untitled Gallery"
- Fixed user menu accessibility in collapsed sidebar
- Fixed long filename overflow on scene cards
- Fixed last sync time showing only full syncs (now shows most recent)

### Breaking Changes
- Initial sync required after upgrade (automatic)
- Migration adds new tables only - all user data preserved

### Upgrade Instructions

1. Back up your database
2. `docker pull carrotwaxr/peek-stash-browser:3.0.0`
3. Restart container
4. Wait for automatic sync

**Beta users:** Run a full sync to populate new fields (Settings > Sync from Stash > Full Sync)

**Full Changelog**: https://github.com/carrotwaxr/peek-stash-browser/compare/v2.1.0...v3.0.0
```
